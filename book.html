<!-- book.html -->
<!DOCTYPE html><html><head><meta charset="utf-8">
<title>Book a Class</title>
<style>
 body{font-family:sans-serif;padding:20px;background:#eef;}
 input,button{padding:8px;margin:6px 0;width:100%;}
 button{background:#2e7d32;color:#fff;border:none;border-radius:6px;}
</style></head><body>
<h2>ðŸ“š Book a Class</h2>
<select id="skill"></select>
<button onclick="book()">Book (COD)</button>
<p id="msg"></p>

<script>
  const token = localStorage.getItem("token");
  if (localStorage.getItem("role")!=="buyer") {alert("Buyers only");location.href="dashboard.html";}
  // load skills
  fetch("/api/skills").then(r=>r.json()).then(sks=>{
     sks.forEach(s=>{const o=document.createElement("option");o.value=s._id;o.text=s.title;skill.appendChild(o);});
  });
  function book(){
    fetch("/api/bookings",{method:"POST",
      headers:{ "Content-Type":"application/json","Authorization":"Bearer "+token},
      body:JSON.stringify({ skillId:skill.value })
    }).then(r=>r.json()).then(_=>msg.textContent="âœ… Class booked!");
  }
</script>
</body></html>
